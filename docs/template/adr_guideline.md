# アーキテクチャ決定記録 (ADR) ガイドライン

## 位置付け
- **目的**: 個々の重要な技術・設計判断とその背景、選択肢、影響範囲を時系列で記録し、意思決定を透明化する。
- **対象**: システム構造や運用に中長期的影響を与える決定（例: 新フレームワーク導入、データストア切替、運用体制の大幅変更）。
- **更新タイミング**: 決定が下された直後。既存ADRの状況が変わったら「Superseded」「Amended」などのステータスで更新。

## ドキュメントとの役割分担
- **Architecture.md**: 現時点で採用しているアーキテクチャの全体像と理由を俯瞰的に説明する「設計憲章」。ADRで確定した決定のうち現在有効なものを統合的に反映する。
- **内部仕様書**: 各機能・運用手順の具体的な仕様書。ADRの決定結果を前提として詳細を記すが、意思決定プロセス自体は含めない。
- **ADR**: 個別の意思決定のログ。`Context → Decision → Consequences` 形式で、議論の背景や他案との比較も明示する。

## 記述テンプレート

```markdown
# ADR-XXX: [決定の要約タイトル]

- **日付**: YYYY-MM-DD
- **ステータス**: Proposed | Accepted | Rejected | Superseded by ADR-YYY
- **関連チケット**: [JIRA/Issueリンクなど]

## 背景 (Context)
- [ビジネス/技術的背景]
- [既存課題や制約]

## 決定 (Decision)
- [採用したアプローチ]
- [選択した理由]

## 代替案 (Alternatives Considered)
- [案A] : [概要と棄却理由]
- [案B] : [概要と棄却理由]

## 影響 (Consequences)
- **ポジティブ**: [期待される効果]
- **ネガティブ/リスク**: [想定リスクと緩和策]
- **影響範囲**: [影響を受けるシステム/チーム]

## フォローアップ (Follow-up)
- [アクションアイテム1]
- [レビュータイミングや監視項目]
```

## 運用ヒント
- ADRは `docs/adr/ADR-XXX-short-title.md` のように連番で管理し、READMEで索引化する。
- Architecture.md は最新の全体像を保つため、採択済みADRの要約を定期的に取り込み、現状と乖離したADRは Superseded として整理する。
- 大きな変更を計画する際は、先にドラフトADRを作成して検討材料を可視化し、合意形成後にステータスを更新すると運用が楽になる。
